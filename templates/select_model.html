{% extends "base.html" %}

{% block title %}Select Solver Model{% endblock %}

{% block page_label %}NEW SUBMISSION STEP 1{% endblock %}

{% block content %}
    <h1>Select a Solver Model</h1>

    <form method="POST" action="{{ url_for('submit_problem_step2') }}">
        <div class="model-selection">
            <label for="model">Solver Model:</label><br>
            <select id="model" name="model_id" onchange="updateHiddenFields()" required>
                {% for model in models %}
                <option value="{{ model.id }}" 
                        data-title="{{ model.title }}" 
                        data-notes="{{ model.notes }}">
                    {{ model.id }} - {{ model.title }} ({{ model.notes }})
                </option>
                {% endfor %}
            </select><br><br>

            <!-- Hidden inputs to hold the selected model's title and notes -->
            <input type="hidden" id="model_title" name="model_title">
            <input type="hidden" id="model_notes" name="model_notes">

            <input type="submit" value="Next">
            <button type="button" onclick="window.location.href='{{ url_for('dashboard') }}'">Cancel</button>
        </div>
    </form>

    <script>
        function updateHiddenFields() {
            var select = document.getElementById('model');
            var selectedOption = select.options[select.selectedIndex];
            document.getElementById('model_title').value = selectedOption.getAttribute('data-title');
            document.getElementById('model_notes').value = selectedOption.getAttribute('data-notes');
        }
    
        // Initialize the hidden fields on page load
        window.onload = function() {
            updateHiddenFields();
        };
    </script>    
{% endblock %}
